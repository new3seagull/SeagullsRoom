<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Greeting</title>
</head>
<body>
<div id="greeting"></div>

<script>
    // Function to make a GET request to the server
    function fetchUserName() {
        // Get the JWT token from localStorage
        const token = localStorage.getItem('jwtToken');

        fetch('http://localhost:8080', {
            method: 'GET',
            headers: {
                'Authorization': `${token}`, // Add the JWT token to the header
                'Content-Type': 'application/json'
            }
        })
            .then(response => response.json())
            .then(response => {
                // Assuming the response JSON has a field named 'name'
                const userName = response.data;
                // Display the greeting message
                document.getElementById('greeting').innerText = `안녕하세요 ${userName} 님`;
            })
            .catch(error => console.error('Error fetching user name:', error));
    }

    // Call the function to fetch user name when the page loads
    window.onload = fetchUserName;
</script>
</body>
</html>
